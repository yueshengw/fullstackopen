{"ast":null,"code":"var _jsxFileName = \"/Users/suling/Documents/GitHub/fullstackopen/part2/phonebook/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport DisplayPersons from './components/DisplayPersons';\nimport axios from 'axios';\nimport handleService from './services/Handle';\nimport Notification from './components/Notification';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filter, setFilter] = useState('');\n  const [notification, setNotification] = useState(null);\n  const backendURL = \"http://localhost:3001/persons\";\n  useEffect(() => {\n    // console.log('test 2', handleService.getAll(backendURL))\n    handleService.getAll(backendURL).then(returnData => {\n      console.log('test 4', returnData);\n      setPersons(returnData);\n    });\n    console.log('test 3', persons);\n  }, []);\n  useEffect(() => {\n    console.log(filter);\n  }, [filter]);\n\n  const test = text => {\n    console.log(text);\n  };\n\n  const onSubmit = event => {\n    event.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }; //false is no duplicates (based on name)\n\n    if (checkDuplicates(personObject) === false) {\n      // setPersons(persons.concat(personObject))\n      //setPersons(persons.handleService(backendURL))\n      // axios\n      //   .post('http://localhost:3001/persons',personObject)\n      //   .then(response => {\n      //     //alert(`${response.data.name} was added!`)\n      //     console.log('test 1',response.data)\n      //     setPersons(persons.concat(response.data))\n      //   })\n      handleService.add(backendURL, personObject).then(returnData => {\n        console.log('test 6', returnData); // checkDuplicates(returnData)===false && \n\n        setPersons(persons.concat(returnData));\n        setNotification(`${returnData.name} was added successfully!`);\n        setTimeout(setNotification(null), 5000);\n      });\n    } else {\n      // alert(`${personObject.name} is already added to phonebook`)\n      if (window.confirm(`${personObject.name} is already added to phonebook, do you want to replace the existing number?`)) {\n        personObject.id = persons.find(person => person.name === personObject.name).id;\n        handleService.update(backendURL, personObject).then(returnData => {\n          console.log('test 10', returnData);\n          handleService.getAll(backendURL).then(returnData => setPersons(returnData));\n        });\n      }\n    }\n\n    setNewName('');\n    setNewNumber('');\n  };\n\n  const handleInputChange = event => {\n    switch (event.target.id) {\n      case 'name':\n        setNewName(event.target.value);\n        break;\n\n      case 'number':\n        setNewNumber(event.target.value);\n        break;\n\n      case 'filter':\n        setFilter(event.target.value);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const checkDuplicates = personObject => {\n    console.log('test 5', personObject);\n    const result = persons.some(person => person.name === personObject.name);\n    return result;\n  };\n\n  const deleteContact = personObject => {\n    window.confirm(`Do you really want to delete ${personObject.name}`) && handleService.deleteContact(backendURL, personObject).then(returnData => {\n      console.log('return data', returnData);\n      setPersons(persons.filter(person => person.id != personObject.id));\n      console.log('contact list', persons);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Notification, {\n      message: 'notification'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      onChange: handleInputChange,\n      value: filter,\n      id: \"filter\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonForm, {\n      onChange: handleInputChange,\n      nameValue: newName,\n      numberValue: newNumber,\n      onSubmit: onSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DisplayPersons, {\n      persons: persons,\n      filter: filter,\n      onClick: deleteContact\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"8ml9z0gSAGns6CaN4twgCrjGxoE=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","Filter","PersonForm","DisplayPersons","axios","handleService","Notification","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","notification","setNotification","backendURL","getAll","then","returnData","console","log","test","text","onSubmit","event","preventDefault","personObject","name","number","checkDuplicates","add","concat","setTimeout","window","confirm","id","find","person","update","handleInputChange","target","value","result","some","deleteContact"],"sources":["/Users/suling/Documents/GitHub/fullstackopen/part2/phonebook/src/App.js"],"sourcesContent":["import { useState } from 'react'\nimport { useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport DisplayPersons from './components/DisplayPersons'\nimport axios from 'axios'\nimport handleService from './services/Handle'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [notification, setNotification] = useState(null)\n  const backendURL = \"http://localhost:3001/persons\"\n\n  useEffect(() => {\n    // console.log('test 2', handleService.getAll(backendURL))\n    handleService.getAll(backendURL)\n      .then(returnData => {\n        console.log('test 4',returnData)\n        setPersons(returnData)\n      })\n    console.log('test 3', persons)\n  }, [])\n  \n  useEffect(() => {\n    console.log(filter)\n  },[filter])\n  \n  const test = (text) => {\n    console.log(text)\n  }\n\n  const onSubmit = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name:newName,\n      number:newNumber\n    }\n\n     //false is no duplicates (based on name)\n    if (checkDuplicates(personObject) === false)\n    {\n      // setPersons(persons.concat(personObject))\n      //setPersons(persons.handleService(backendURL))\n      // axios\n      //   .post('http://localhost:3001/persons',personObject)\n      //   .then(response => {\n      //     //alert(`${response.data.name} was added!`)\n      //     console.log('test 1',response.data)\n      //     setPersons(persons.concat(response.data))\n      //   })\n      handleService\n        .add(backendURL,personObject)\n        .then(returnData => {\n          console.log('test 6',returnData)\n          // checkDuplicates(returnData)===false && \n          setPersons(persons.concat(returnData))\n          setNotification(`${returnData.name} was added successfully!`)\n          setTimeout(setNotification(null),5000)\n        })\n    }\n    else{\n      // alert(`${personObject.name} is already added to phonebook`)\n      if (window.confirm(`${personObject.name} is already added to phonebook, do you want to replace the existing number?`)) {\n        personObject.id = persons.find(person => person.name === personObject.name).id;\n        handleService \n          .update(backendURL, personObject)\n          .then(returnData => {\n            console.log('test 10',returnData)\n            handleService\n              .getAll(backendURL)\n              .then(returnData => setPersons(returnData))            \n          })\n      }\n    }\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const handleInputChange = (event) => {\n    switch (event.target.id) {\n      case 'name':\n        setNewName(event.target.value);\n        break;\n      case 'number':\n        setNewNumber(event.target.value);\n        break;\n      case 'filter':\n        setFilter(event.target.value);\n        break;\n      default:\n        break;\n    }\n  }\n\n  const checkDuplicates  = (personObject) => {\n    console.log('test 5',personObject)\n    const result = persons.some((person) => person.name === personObject.name);\n    return result\n  }\n\n  const deleteContact = (personObject) => {\n    window.confirm(`Do you really want to delete ${personObject.name}`) &&\n    handleService\n      .deleteContact(backendURL,personObject)\n      .then(returnData => {\n        console.log('return data',returnData)\n        setPersons(persons.filter(person => person.id != personObject.id))\n        console.log('contact list',persons)\n      })\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={'notification'}/>\n      <Filter onChange={handleInputChange} value={filter} id='filter' />\n      <h2>add a new</h2>\n      <PersonForm onChange={handleInputChange} nameValue={newName} numberValue={newNumber} onSubmit={onSubmit}/>\n      <h2>Numbers</h2>\n      <DisplayPersons persons={persons} filter={filter} onClick={deleteContact}/>\n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module"}